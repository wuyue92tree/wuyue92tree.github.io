<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>django-web框架 | 资源客栈</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="GO AND BEYOND">
    <link rel="preload" href="/assets/css/0.styles.696438c8.css" as="style"><link rel="preload" href="/assets/js/app.a870adf0.js" as="script"><link rel="preload" href="/assets/js/2.8cb5b17e.js" as="script"><link rel="preload" href="/assets/js/27.b77ebbf4.js" as="script"><link rel="prefetch" href="/assets/js/10.3aeabe06.js"><link rel="prefetch" href="/assets/js/11.4cbcbd9d.js"><link rel="prefetch" href="/assets/js/12.4261461c.js"><link rel="prefetch" href="/assets/js/13.4eceefe6.js"><link rel="prefetch" href="/assets/js/14.0c7635ad.js"><link rel="prefetch" href="/assets/js/15.61de4f19.js"><link rel="prefetch" href="/assets/js/16.de801ecc.js"><link rel="prefetch" href="/assets/js/17.4f89c778.js"><link rel="prefetch" href="/assets/js/18.3c5778a7.js"><link rel="prefetch" href="/assets/js/19.eb3b8a6a.js"><link rel="prefetch" href="/assets/js/20.bdaaa403.js"><link rel="prefetch" href="/assets/js/21.009d60ad.js"><link rel="prefetch" href="/assets/js/22.146c7dc9.js"><link rel="prefetch" href="/assets/js/23.75a33d31.js"><link rel="prefetch" href="/assets/js/24.cd874762.js"><link rel="prefetch" href="/assets/js/25.71a9a698.js"><link rel="prefetch" href="/assets/js/26.43108dbd.js"><link rel="prefetch" href="/assets/js/28.5aec0f17.js"><link rel="prefetch" href="/assets/js/29.49461ca3.js"><link rel="prefetch" href="/assets/js/3.35b15324.js"><link rel="prefetch" href="/assets/js/30.528d2155.js"><link rel="prefetch" href="/assets/js/31.28fc852a.js"><link rel="prefetch" href="/assets/js/32.57e86b5c.js"><link rel="prefetch" href="/assets/js/33.103120b9.js"><link rel="prefetch" href="/assets/js/34.71ae33bc.js"><link rel="prefetch" href="/assets/js/35.2ead5d1b.js"><link rel="prefetch" href="/assets/js/36.fd21b995.js"><link rel="prefetch" href="/assets/js/37.ea06fbaa.js"><link rel="prefetch" href="/assets/js/38.9439ff58.js"><link rel="prefetch" href="/assets/js/39.aabecc99.js"><link rel="prefetch" href="/assets/js/4.5e700901.js"><link rel="prefetch" href="/assets/js/40.61b037a3.js"><link rel="prefetch" href="/assets/js/41.11a0c8d5.js"><link rel="prefetch" href="/assets/js/42.fe83be43.js"><link rel="prefetch" href="/assets/js/43.4afd9142.js"><link rel="prefetch" href="/assets/js/44.d2fc5c17.js"><link rel="prefetch" href="/assets/js/45.b90f7893.js"><link rel="prefetch" href="/assets/js/46.8a684ee9.js"><link rel="prefetch" href="/assets/js/47.d09afd14.js"><link rel="prefetch" href="/assets/js/48.ccc5997f.js"><link rel="prefetch" href="/assets/js/49.0bdbb547.js"><link rel="prefetch" href="/assets/js/5.3ae2ba50.js"><link rel="prefetch" href="/assets/js/50.56b63d2d.js"><link rel="prefetch" href="/assets/js/51.d78a0a6c.js"><link rel="prefetch" href="/assets/js/52.404c4a2c.js"><link rel="prefetch" href="/assets/js/53.dc578042.js"><link rel="prefetch" href="/assets/js/54.ea6d195d.js"><link rel="prefetch" href="/assets/js/55.f13b0a22.js"><link rel="prefetch" href="/assets/js/56.ba1700bf.js"><link rel="prefetch" href="/assets/js/57.2e0fdf3f.js"><link rel="prefetch" href="/assets/js/58.f7839aa0.js"><link rel="prefetch" href="/assets/js/59.eb067ede.js"><link rel="prefetch" href="/assets/js/6.c5f8be63.js"><link rel="prefetch" href="/assets/js/60.fc1fab66.js"><link rel="prefetch" href="/assets/js/61.7847aec8.js"><link rel="prefetch" href="/assets/js/62.b3941b2d.js"><link rel="prefetch" href="/assets/js/63.c6e66541.js"><link rel="prefetch" href="/assets/js/64.fd4f7091.js"><link rel="prefetch" href="/assets/js/65.1ea76be0.js"><link rel="prefetch" href="/assets/js/66.c99cb93b.js"><link rel="prefetch" href="/assets/js/67.ceacc996.js"><link rel="prefetch" href="/assets/js/68.b620b8f1.js"><link rel="prefetch" href="/assets/js/69.27feffbf.js"><link rel="prefetch" href="/assets/js/7.487605d3.js"><link rel="prefetch" href="/assets/js/70.883a98b8.js"><link rel="prefetch" href="/assets/js/71.3dde4be7.js"><link rel="prefetch" href="/assets/js/72.8aa742cd.js"><link rel="prefetch" href="/assets/js/73.1289946c.js"><link rel="prefetch" href="/assets/js/74.5568a47d.js"><link rel="prefetch" href="/assets/js/75.3bfbe16e.js"><link rel="prefetch" href="/assets/js/76.ae60dc52.js"><link rel="prefetch" href="/assets/js/77.01c5c399.js"><link rel="prefetch" href="/assets/js/8.d678c2b6.js"><link rel="prefetch" href="/assets/js/9.dde1e46a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.696438c8.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">资源客栈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术专栏</a></div><div class="nav-item"><a href="/collector/" class="nav-link">收藏家</a></div><div class="nav-item"><a href="/opensource/" class="nav-link">开源项目</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/wuyue92tree" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="./img/avatar.png"> <div class="blogger-info"><h3>Yue.Wu</h3> <span>GO AND BEYOND</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术专栏</a></div><div class="nav-item"><a href="/collector/" class="nav-link">收藏家</a></div><div class="nav-item"><a href="/opensource/" class="nav-link">开源项目</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div> <a href="https://github.com/wuyue92tree" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>django-web框架</span> <!----></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-33863c7e><div class="articleInfo" data-v-33863c7e><!----> <div class="info" data-v-33863c7e><div title="作者" class="author iconfont icon-touxiang" data-v-33863c7e><a href="https://github.com/wuyue92tree" target="_blank" title="作者" class="beLink" data-v-33863c7e>Yue.Wu</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-33863c7e><a href="javascript:;" data-v-33863c7e>2017-05-13</a></div> <div title="分类" class="date iconfont icon-wenjian" data-v-33863c7e><a href="/categories/?category=%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91" data-v-33863c7e>软件开发 </a></div></div></div></div> <!----> <div class="content-wrapper"><!----> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          django-web框架
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1>什么是django？</h1> <p>Django is a high-level Python Web framework that encourages rapid development and clean, pragmatic design. Built by experienced developers, it takes care of much of the hassle of Web development, so you can focus on writing your app without needing to reinvent the wheel. It’s free and open source.</p> <p>Django是一个高级Python Web框架，它鼓励快速的开发和简洁、实用的设计。它由经验丰富的开发人员开发而成，他们负责解决大部分Web开发中的麻烦，让你能专注与应用程序的编写，而不需要重新发明轮子。它是一个免费、开源的项目。</p> <h1>运行环境</h1> <p>django只需要你安装有python环境就可以运行起来，而且它不依赖其他第三方模块，一个包就能完成网站开发。</p> <h1>安装</h1> <pre><code class="language-shell">pip install django</code></pre> <h1>Django中的MTV设计模式</h1> <h2>MVC设计模式</h2> <p><a href="http://baike.baidu.com/item/MVC">MVC</a>全名是Model View Controller，是模型(Model)－视图(View)－控制器(Controller)的缩写。</p> <ol><li><p>Model（模型）表示应用程序核心（通常模型对象负责在数据库中存取数据）。</p></li> <li><p>View（视图）显示数据（通常视图是依据模型数据创建的）。</p></li> <li><p>Controller（控制器）处理输入（通常控制器负责从视图读取数据，控制用户输入，并向模型发送数据）。</p></li></ol> <h2>MTV设计模式</h2> <ol><li><p>M 代表模型（Model）：负责业务对象和数据库的关系映射(ORM)。</p></li> <li><p>T 代表模板 (Template)：负责如何把页面展示给用户(html)。</p></li> <li><p>V 代表视图（View）：负责业务逻辑，并在适当时候调用Model和Template。</p></li></ol> <p>除了上述三层之外，django还提供了一个URL分发器，用于将一个个URL的请求分发到对应的View处理。</p> <h1>django工作流程</h1> <p><img src="http://assets.tianmaying.com/md-image/0a7650b34227a541ffdf4c20e5c1c52a.png" alt=""></p> <ol><li><p>浏览器发起请求;</p></li> <li><p>web server（nginx）对请求进行转发，静态文件直接访问/其他请求转发到wsgi服务器;</p></li> <li><p>wsgi server接收请求，将请求转发给django，并由中间件进行预处理;</p></li> <li><p>预处理完的请求，被转发到URL分发器，URL分发器将请求发送给对应的View进行处理;</p></li></ol> <p>5a. 若请求涉及到数据库操作，则通过models对数据库进行CRUD操作，并将结果通过templates渲染返回;</p> <p>5b. 若请求不涉及数据库操作，则直接返回相应的templates页面;</p> <p>5d. 若操作异常，则将异常返回。</p> <ol start="6"><li><p>View将返回的页面返回给wsgi server，wsgi server将页面返回给web server;</p></li> <li><p>web server将请求结果返回给浏览器。</p></li></ol> <h1>开始一个新的django项目</h1> <h2>初始化工程</h2> <pre><code class="language-bash">django-admin startproject demo_project</code></pre> <h2>初始化app</h2> <pre><code>django-admin startapp demo_app</code></pre> <p>工程目录如下所示：</p> <pre><code class="language-bash">.
├── demo_app              # app目录
│   ├── admin.py          # admin控制器，在使用django自带admin时使用
│   ├── apps.py
│   ├── __init__.py
│   ├── migrations
│   │   └── __init__.py
│   ├── models.py         # 用于将数据库抽象化为orm对象
│   ├── tests.py          # 单元测试
│   └── views.py          # 用于请求逻辑的具体实现
├── demo_project
│   ├── __init__.py
│   ├── settings.py       # 公共设置
│   ├── urls.py           # 公共urls分发
│   └── wsgi.py           # wsgi服务器接口
└── manage.py             # 本地调试接口</code></pre> <h2>配置</h2> <p><a href="https://docs.djangoproject.com/en/1.11/topics/settings/">settings</a></p> <pre><code class="language-bash"># 常用配置
<h1 id="是否启用debug模式"><a href="#是否启用debug模式" class="header-anchor">#</a> 是否启用debug模式</h1>
<p>DEBUG = True</p>
<h1 id="允许访问的hosts"><a href="#允许访问的hosts" class="header-anchor">#</a> 允许访问的hosts</h1>
<p>ALLOWED_HOSTS = []</p>
<h1 id="加载的apps列表"><a href="#加载的apps列表" class="header-anchor">#</a> 加载的APPS列表</h1>
<p>INSTALLED_APPS = []</p>
<h1 id="中间件"><a href="#中间件" class="header-anchor">#</a> 中间件</h1>
<p>MIDDLEWARE = []</p>
<h1 id="url分发入口"><a href="#url分发入口" class="header-anchor">#</a> URL分发入口</h1>
<p>ROOT_URLCONF = ''</p>
<h1 id="指定templates路径"><a href="#指定templates路径" class="header-anchor">#</a> 指定templates路径</h1>
<p>TEMPLATES = []</p>
<h1 id="wsgi服务器入口"><a href="#wsgi服务器入口" class="header-anchor">#</a> wsgi服务器入口</h1>
<p>WSGI_APPLICATION = ''</p>
<h1 id="数据库配置"><a href="#数据库配置" class="header-anchor">#</a> 数据库配置</h1>
<p>DATABASES = {}</p>
<h1 id="默认语言设置"><a href="#默认语言设置" class="header-anchor">#</a> 默认语言设置</h1>
<p>LANGUAGE_CODE = 'en-us'</p>
<h1 id="时区设置"><a href="#时区设置" class="header-anchor">#</a> 时区设置</h1>
<p>TIME_ZONE = 'UTC'</p>
<h1 id="静态文件前缀设置"><a href="#静态文件前缀设置" class="header-anchor">#</a> 静态文件前缀设置</h1>
<p>STATIC_URL = '/static/'</p></code></pre> <h2>初始化数据库/配置admin账户</h2> <pre><code class="language-bash"># 初始化数据库
python manage.py makemigrations
python manage.py migrate<p></p>
<h1 id="创建admin帐号"><a href="#创建admin帐号" class="header-anchor">#</a> 创建admin帐号</h1>
<p>python manage.py createsuperuser</p>
<p>Username (leave blank to use 'wuyue'): admin
Email address: admin@qq.com
Password:
Password (again):
Superuser created successfully.</p></code></pre> <h2>运行django，<a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a></h2> <pre><code class="language-bash"># 默认url http://127.0.0.1:8000
python manage.py runserver</code></pre> <h1>admin后台</h1> <h2>认证模块介绍</h2> <ol><li>用户</li></ol> <p>username : 用户名</p> <p>password : 密码</p> <p>first_name : 名字</p> <p>last_name : 姓氏</p> <p>email : 电子邮箱</p> <p>is_superuser : 标识是否为超级用户</p> <p>is_staff : 标识是否能登录本后台</p> <p>is_active : 标识账户活跃状态</p> <p>permission : 用户权限</p> <p>group : 用户所属用户组</p> <p>last_login : 最后一次登录</p> <p>date_joined : 加入时间</p> <ol start="2"><li>组</li></ol> <p>name : 组名称</p> <p>permission : 权限</p> <h2>models设置</h2> <p>以简单的个人博客后台为例：</p> <ol><li><p>总共三个表，文章/分类/标签;</p></li> <li><p>表关系：文章和分类（一对多），文章和标签（多对多）。</p></li></ol> <pre><code class="language-python"># -<em>- coding: utf-8 -</em>-
from <strong>future</strong> import unicode_literals<p></p>
<p>from django.db import models</p>
<h1 id="create-your-models-here"><a href="#create-your-models-here" class="header-anchor">#</a> Create your models here.</h1>
<p>class Article(models.Model):
title = models.CharField(max_length=255, verbose_name=&quot;标题&quot;)
content = models.TextField(verbose_name=&quot;内容&quot;)
category = models.ForeignKey('Category', verbose_name=&quot;分类&quot;)
tag = models.ManyToManyField('tag', verbose_name=&quot;标签&quot;)
is_published = models.BooleanField(default=False, verbose_name=&quot;发布状态&quot;)
update_time = models.DateTimeField(verbose_name=&quot;更新时间&quot;)
dateline = models.DateTimeField(auto_now=True, verbose_name=&quot;创建时间&quot;)</p>
<div class="language- extra-class"><pre><code>def __unicode__(self):
    return &amp;quot;%s&amp;quot; % self.title

class Meta:
    verbose_name = &amp;quot;文章&amp;quot;
    verbose_name_plural = verbose_name
</code></pre></div><p>class Category(models.Model):
category = models.CharField(max_length=255, verbose_name=&quot;分类&quot;)
desc = models.TextField(verbose_name=&quot;描述&quot;)</p> <div class="language- extra-class"><pre><code>def __unicode__(self):
    return &amp;quot;%s&amp;quot; % self.category

class Meta:
    verbose_name = &amp;quot;分类&amp;quot;
    verbose_name_plural = verbose_name
</code></pre></div><p>class Tag(models.Model):
tag = models.CharField(max_length=255, verbose_name=&quot;标签&quot;)</p> <div class="language- extra-class"><pre><code>def __unicode__(self):
    return &amp;quot;%s&amp;quot; % self.tag

class Meta:
    verbose_name = &amp;quot;标签&amp;quot;
    verbose_name_plural = verbose_name&lt;/code&gt;&lt;/pre&gt;
</code></pre></div><h2>admin设置</h2> <ol><li><p>将model注册到admin后台;</p></li> <li><p>控制model展示到admin的字段及形式。</p></li></ol> <pre><code class="language-python"># -*- coding: utf-8 -*-
from __future__ import unicode_literals
<p>from django.contrib import admin
from .models import Article, Category, Tag</p>
<h1 id="register-your-models-here"><a href="#register-your-models-here" class="header-anchor">#</a> Register your models here.</h1>
<p>@admin.register(Article)
class ArticleAdmin(admin.ModelAdmin):
list_display = ('title', 'category', 'is_published', 'update_time',
'dateline')
list_filter = ('category__category',)
search_fields = ('title',)
actions = ['make_published']</p>
<div class="language- extra-class"><pre><code>def make_published(self, request, queryset):
    queryset.update(is_published=1)

make_published.short_description = &amp;quot;发布所选的 文章&amp;quot;
</code></pre></div><p>@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
list_display = ('category', 'desc')</p> <p>@admin.register(Tag)
class TagAdmin(admin.ModelAdmin):
pass</p></code></pre> <h1>django连接多个数据库</h1> <h2>添加数据库连接配置</h2> <ol><li><p>选择合适的engine，django支持的数据库（sqlite3, mysql, postgreSQL, oracle）;</p></li> <li><p>设置数据库连接的相关参数。</p></li></ol> <pre><code class="language-python">DATABASES = {
'default': {
'ENGINE': 'django.db.backends.sqlite3',
'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
},
xxx: {
'ENGINE': 'django.db.backends.mysql',
'NAME': xxx,
'USER': xxx,
'PASSWORD': xxx,
'HOST': xxx,
'PORT': '3306',
},
}</code></pre> <h2>新增一个app，并添加到INSTALLED_APPS中</h2> <h2>添加路由组件及数据库app对应的MAPPING</h2> <ol><li><p>添加路由组件;</p></li> <li><p>添加MAPPING。</p></li></ol> <pre><code class="language-python"># 路由组件 path=工程目录/database_router.py<p></p>
<p>#!/usr/bin/env python</p>
<h1 id="coding-utf-8"><a href="#coding-utf-8" class="header-anchor">#</a> -<em>- coding: utf-8 -</em>-</h1>
<p>from django.conf import settings</p>
<p>DATABASE_MAPPING = settings.DATABASE_APPS_MAPPING</p>
<p>class DatabaseAppsRouter(object):
&quot;&quot;&quot;
A router to control all database operations on models for different
databases.</p>
<div class="language- extra-class"><pre><code>In case an app is not set in settings.DATABASE_APPS_MAPPING, the router
will fallback to the `default` database.

Settings example:

DATABASE_APPS_MAPPING = {&amp;#039;app1&amp;#039;: &amp;#039;db1&amp;#039;, &amp;#039;app2&amp;#039;: &amp;#039;db2&amp;#039;}
&amp;quot;&amp;quot;&amp;quot;

def db_for_read(self, model, **hints):
    &amp;quot;&amp;quot;&amp;quot;&amp;quot;Point all read operations to the specific database.&amp;quot;&amp;quot;&amp;quot;
    if model._meta.app_label in DATABASE_MAPPING:
        return DATABASE_MAPPING[model._meta.app_label]
    return None

def db_for_write(self, model, **hints):
    &amp;quot;&amp;quot;&amp;quot;Point all write operations to the specific database.&amp;quot;&amp;quot;&amp;quot;
    if model._meta.app_label in DATABASE_MAPPING:
        return DATABASE_MAPPING[model._meta.app_label]
    return None

def allow_relation(self, obj1, obj2, **hints):
    &amp;quot;&amp;quot;&amp;quot;Allow any relation between apps that use the same database.&amp;quot;&amp;quot;&amp;quot;
    db_obj1 = DATABASE_MAPPING.get(obj1._meta.app_label)
    db_obj2 = DATABASE_MAPPING.get(obj2._meta.app_label)
    if db_obj1 and db_obj2:
        if db_obj1 == db_obj2:
            return True
        else:
            return False
    return None

def allow_syncdb(self, db, model):
    &amp;quot;&amp;quot;&amp;quot;Make sure that apps only appear in the related database.&amp;quot;&amp;quot;&amp;quot;

    if db in DATABASE_MAPPING.values():
        return DATABASE_MAPPING.get(model._meta.app_label) == db
    elif model._meta.app_label in DATABASE_MAPPING:
        return False
    return None
</code></pre></div><h1 id="数据库app的mapping"><a href="#数据库app的mapping" class="header-anchor">#</a> 数据库app的MAPPING</h1> <p>DATABASE_ROUTERS = ['database_router.DatabaseAppsRouter']
DATABASE_APPS_MAPPING = {
# example:
# 'app_name':'database_name',
'default': 'default',
xxx: xxx,
}</p></code></pre> <h2>抽象化表结构，生成models</h2> <pre><code class="language-bash">python manage.py inspectdb --database=database table</code></pre> <h1>django常用的第三方扩展</h1> <h2><a href="http://djangosuit.com/">django-suit ​</a></h2> <p>基于bootstrap的后台管理主题，并集成了一些扩展功能，使admin的使用更灵活。</p> <h2><a href="http://docs.celeryproject.org/en/latest/django/">djcelery</a></h2> <p>许多Django应用需要执行异步任务, 以便不耽误http request的执行. 我们也可以选择许多方法来完成异步任务, 使用Celery是一个比较好的选择, 因为Celery有着大量的社区支持, 能够完美的扩展, 和Django结合的也很好. 并且djcelery允许我们通过界面管理任务，使任务定时执行。</p> <h2><a href="http://www.django-rest-framework.org/">django-rest-framework</a></h2> <p>Django REST framework 是一个强大且灵活的工具包，用以构建Web APIs。</p> <p>为什么要使用REST framework？ </p> <ul><li><p><a href="http://restframework.herokuapp.com/">在线可视的API</a>，对于赢得你的开发者们十分有用</p></li> <li><p><a href="http://www.django-rest-framework.org/api-guide/authentication/">验证策略</a>涵盖了<a href="http://www.django-rest-framework.org/api-guide/authentication/#django-rest-framework-oauth">OAuth1a</a>和<a href="http://www.django-rest-framework.org/api-guide/authentication/#django-oauth-toolkit">OAuth2</a></p></li> <li><p>同时支持<a href="http://www.django-rest-framework.org/api-guide/serializers#modelserializer">ORM</a>和<a href="http://www.django-rest-framework.org/api-guide/serializers#serializers">非ORM</a>数据源的<a href="http://www.django-rest-framework.org/api-guide/serializers/">序列化</a></p></li> <li><p>可以配置各个环节，若无需<a href="http://www.django-rest-framework.org/api-guide/generic-views/">更多</a><a href="http://www.django-rest-framework.org/api-guide/viewsets/">强大</a>的<a href="http://www.django-rest-framework.org/api-guide/routers/">特性</a>，使用<a href="http://www.django-rest-framework.org/api-guide/views#function-based-views">一般基于类（function-based）的视图（views）</a>即可</p></li> <li><p><a href="http://www.django-rest-framework.org/">大量的文档</a>，强力的<a href="https://groups.google.com/forum/?fromgroups#!forum/django-rest-framework">社区支持</a></p></li></ul> <h2><a href="http://django-haystack.readthedocs.io/en/master/">haystack</a></h2> <p>haystack是一个第三发Django的搜索模块。它的特点是一个统一的、熟悉的API允许你使用不同的搜索后端（如Solr，Elasticsearch，Whoosh，Xapian，等）而不需要修改你的代码。</p><p></p></code></pre></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/wuyue92tree/edit/master/docs/_posts/00.django-web框架.md" target="_blank" rel="noopener noreferrer">帮我改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=django" title="标签">#django</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/02/04, 06:30:19</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/a3a305/"><div>docker-compose部署openldap</div></a> <span>12-30</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/9b2797/"><div>drf中如何设置返回Serializers自定义字段</div></a> <span>10-10</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/4c7c71/"><div>在admin中list_display如何展示外键字段</div></a> <span>10-10</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2017-2021
    <span>Yue.Wu | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.a870adf0.js" defer></script><script src="/assets/js/2.8cb5b17e.js" defer></script><script src="/assets/js/27.b77ebbf4.js" defer></script>
  </body>
</html>