(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{442:function(s,e,t){"use strict";t.r(e);var a=t(12),n=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("Proxmox VE是一款套开源的虚拟化管理软件，用户可通过网页的方式来管理服务器上使用 kvm 以及 lxc 技术运行的虚拟机。同时提供了一些先进功能的支持，如集群、HA等。")]),s._v(" "),t("p",[s._v("PVE虽然是开源，却是由一个商业公司在运营、更新以及维护。")]),s._v(" "),t("p",[s._v("PVE与esxi、openstack属于同类型产品，相较而言比较小众，国内相关的资料比较匮乏，但这并不代表它不够优秀。")]),s._v(" "),t("blockquote",[t("p",[s._v("官网传送门：https://www.proxmox.com/en/")])]),s._v(" "),t("p",[s._v("esxi基于红帽，并且做了深度定制，这导致它对硬件要求比较苛刻。与esxi不同的是，pve基于debian系统构建，熟悉debian或ubuntu的童鞋可以轻松上手。pve可直接通过apt进行安装，也可以使用官方打包的镜像直接进行启动盘烧制安装。这里主要给大家介绍下前者~")]),s._v(" "),t("h1",{attrs:{id:"安装背景介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装背景介绍"}},[s._v("#")]),s._v(" 安装背景介绍")]),s._v(" "),t("ul",[t("li",[s._v("主机：自己组装的**（华南金牌x79双路寨板+e5-2650v2*2+三星内存条32g*3+ssd240g+硬盘500g+板载集显）**")]),s._v(" "),t("li",[s._v("系统：debian-live-10.1.0-amd64-xfce.iso")])]),s._v(" "),t("p",[s._v("Tips: 在部署pve之前，采用的kvm + virt-manager直接安装kvm虚拟机（尝试过安装esxi，怎奈组装的主机根本安装不了），centos7也跑不了，但是debian10部署成功还是比较nice的。要注意的是，如果按照我的组装机配置安装DEBIAN10的话，不要下载GNOME桌面的镜像，不然加载界面会卡到爆，猜测是因为没有单独安装显卡的缘故，不过xface桌面跑起来还是很流畅的。")]),s._v(" "),t("h1",{attrs:{id:"安装步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[s._v("#")]),s._v(" 安装步骤")]),s._v(" "),t("p",[s._v("debian10的安装，这里就不赘述了哈，大家自行google")]),s._v(" "),t("h2",{attrs:{id:"更新debian10并进行基础配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更新debian10并进行基础配置"}},[s._v("#")]),s._v(" 更新Debian10并进行基础配置")]),s._v(" "),t("ol",[t("li",[s._v("更新DebianOS")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo apt update -y\nsudo apt upgrade -y\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("设置系统名称并修改"),t("code",[s._v("/etc/hosts")]),s._v("文件")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 这里我的主机名为 home-stack，ip地址为192.168.1.60，按实际情况修改\nsudo hostnamectl set-hostname home-stack\nsudo echo "192.168.1.60\thome-stack" | sudo tee -a /etc/hosts\n# 若/etc/hosts中有 “127.0.1.1\thome-stack”的记录，需要将其删除，否则后面可能会导致pve-manager启动失败\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("添加PVE相关的apt下载库")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 1. 导入GPG秘钥：\nwget -qO - http://download.proxmox.com/debian/proxmox-ve-release-6.x.gpg | sudo apt-key add -\n# 2. 添加Proxmox VE存储库及Proxmox VE Ceph存储库\n# 官方源\nsudo echo "deb http://download.proxmox.com/debian/pve buster pve-no-subscription" | sudo tee /etc/apt/sources.list.d/pve-install-repo.list\nsudo echo "deb http://download.proxmox.com/debian/ceph-nautilus buster main" | sudo tee /etc/apt/sources.list.d/ceph.list\n# 国内源\nsudo echo "deb http://download.proxmox.wiki/debian/pve buster pve-no-subscription" | sudo tee /etc/apt/sources.list.d/pve-install-repo.list\nsudo echo "deb http://download.proxmox.wiki/debian/ceph-nautilus buster main" | sudo tee /etc/apt/sources.list.d/ceph.list\n# 添加完库后执行下更新\nsudo apt update -y\nsudo apt upgrade -y\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"安装proxmox-ve软件包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装proxmox-ve软件包"}},[s._v("#")]),s._v(" 安装Proxmox VE软件包")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo apt install proxmox-ve postfix open-iscsi ksmtuned ceph-base\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"配置postfix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置postfix"}},[s._v("#")]),s._v(" 配置postfix")]),s._v(" "),t("p",[s._v("选择"),t("code",[s._v("Internet Site")]),s._v("，其他配置选择默认。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 重新配置\nsudo dpkg-reconfigure postfix\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"配置网桥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置网桥"}},[s._v("#")]),s._v(" 配置网桥")]),s._v(" "),t("p",[s._v("新建"),t("code",[s._v("Linux Bridge")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/aR5jUH.png",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"迁移导入kvm主机"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#迁移导入kvm主机"}},[s._v("#")]),s._v(" 迁移导入kvm主机")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 创建虚拟机\nsudo qm create 104\n# 导入磁盘\nsudo qm importdisk 104 /kvm/disk/rancher-05.qcow2 kvm\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h1",{attrs:{id:"faq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[s._v("#")]),s._v(" FAQ")]),s._v(" "),t("h2",{attrs:{id:"systemd-timesyncd启动失败问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#systemd-timesyncd启动失败问题"}},[s._v("#")]),s._v(" systemd-timesyncd启动失败问题")]),s._v(" "),t("p",[s._v("ntpd导致systemd-timesyncd无法正常启动")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("sudo mv /usr/sbin/ntpd /usr/sbin/ntpd.bk\nsudo systemctl restart systemd-timesyncd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);