(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{431:function(a,s,n){"use strict";n.r(s);var r=n(12),t=Object(r.a)({},(function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h2",{attrs:{id:"介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),n("p",[a._v("通过ldap统一管理grafana用户")]),a._v(" "),n("h2",{attrs:{id:"版本信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#版本信息"}},[a._v("#")]),a._v(" 版本信息")]),a._v(" "),n("ul",[n("li",[a._v("openldap: 2.4.50")]),a._v(" "),n("li",[a._v("phpLDAPadmin: 1.2.5")]),a._v(" "),n("li",[a._v("grafana: v6.3.4")])]),a._v(" "),n("h2",{attrs:{id:"granfa配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#granfa配置"}},[a._v("#")]),a._v(" granfa配置")]),a._v(" "),n("h3",{attrs:{id:"grafana-ini"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#grafana-ini"}},[a._v("#")]),a._v(" grafana.ini")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("\n[auth.ldap]\n## 启用ldap\nenabled = true\nconfig_file = /etc/grafana/ldap.toml\n## 当用户不存在时，直接创建\nallow_sign_up = true\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("h3",{attrs:{id:"ldap-toml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ldap-toml"}},[a._v("#")]),a._v(" ldap.toml")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('[[servers]]\nhost = <ldap-server>\n## Default port is 389 or 636 if use_ssl = true\nport = 389\nuse_ssl = false\nstart_tls = false\nssl_skip_verify = false\n\nbind_dn = "cn=<YourUser>,dc=<YourDomain>,dc=<YourDomain>"\nbind_password = \'<YourPassWord>\'\n\n## 通过uid查找用户\nsearch_filter = "(uid=%s)"\n\nsearch_base_dns = ["dc=<YourDomain>,dc=<YourDomain>"]\n\n## 配置ldap和grafana字段映射\n[servers.attributes]\n## 要注意的是，ldap中objectClass属性必须是groupOfUniqueNames，用户才会有memberOf属性\nmember_of = "memberOf"\nemail =  "mail"\nname = "displayName"\nusername = "uid"\n\n## 以下group_dn均对应ldap中的groupOfUniqueNames组\n[[servers.group_mappings]]\n\n## 超级管理员\ngroup_dn = "cn=superadmin,ou=grafana,ou=applications,ou=groups,dc=<YourDomain>,dc=<YourDomain>"\norg_role = "Admin"\ngrafana_admin = true\norg_id = 1\n\n## 管理员\n[[servers.group_mappings]]\ngroup_dn = "cn=admin,ou=grafana,ou=applications,ou=groups,dc=<YourDomain>,dc=<YourDomain>"\norg_role = "Admin"\norg_id = 1\n\n## 编辑用户\n[[servers.group_mappings]]\ngroup_dn = "cn=editor,ou=grafana,ou=applications,ou=groups,dc=<YourDomain>,dc=<YourDomain>"\norg_role = "Editor"\norg_id = 1\n\n## 只读用户\n[[servers.group_mappings]]\ngroup_dn = "cn=viewer,ou=grafana,ou=applications,ou=groups,dc=<YourDomain>,dc=<YourDomain>"\norg_role = "Viewer"\norg_id = 1\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br"),n("span",{staticClass:"line-number"},[a._v("39")]),n("br"),n("span",{staticClass:"line-number"},[a._v("40")]),n("br"),n("span",{staticClass:"line-number"},[a._v("41")]),n("br"),n("span",{staticClass:"line-number"},[a._v("42")]),n("br"),n("span",{staticClass:"line-number"},[a._v("43")]),n("br"),n("span",{staticClass:"line-number"},[a._v("44")]),n("br"),n("span",{staticClass:"line-number"},[a._v("45")]),n("br"),n("span",{staticClass:"line-number"},[a._v("46")]),n("br"),n("span",{staticClass:"line-number"},[a._v("47")]),n("br"),n("span",{staticClass:"line-number"},[a._v("48")]),n("br"),n("span",{staticClass:"line-number"},[a._v("49")]),n("br"),n("span",{staticClass:"line-number"},[a._v("50")]),n("br")])]),n("h2",{attrs:{id:"openldap配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#openldap配置"}},[a._v("#")]),a._v(" openldap配置")]),a._v(" "),n("h3",{attrs:{id:"groupofuniquenames组-对应grafan配置文件ldap-toml中各分组"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#groupofuniquenames组-对应grafan配置文件ldap-toml中各分组"}},[a._v("#")]),a._v(" groupOfUniqueNames组，对应grafan配置文件ldap.toml中各分组")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://www.antio.top/wp-content/uploads/2021/01/wp_editor_md_154020147dcb3c7d743d316c17f75f46.jpg",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{src:"https://www.antio.top/wp-content/uploads/2021/01/wp_editor_md_154020147dcb3c7d743d316c17f75f46.jpg",alt:""}}),n("OutboundLink")],1)]),a._v(" "),n("h3",{attrs:{id:"将用户加入到指定分组中"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#将用户加入到指定分组中"}},[a._v("#")]),a._v(" 将用户加入到指定分组中")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://www.antio.top/wp-content/uploads/2021/01/wp_editor_md_b2ab081889a4951632fd6b7085991e0d.jpg",target:"_blank",rel:"noopener noreferrer"}},[n("img",{attrs:{src:"https://www.antio.top/wp-content/uploads/2021/01/wp_editor_md_b2ab081889a4951632fd6b7085991e0d.jpg",alt:""}}),n("OutboundLink")],1)]),a._v(" "),n("h2",{attrs:{id:"验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#验证"}},[a._v("#")]),a._v(" 验证")]),a._v(" "),n("ol",[n("li",[a._v("使用ldap中创建的用户登录grafana;")]),a._v(" "),n("li",[a._v("验证grafana用户权限;")]),a._v(" "),n("li",[a._v("更新ldap用户权限，验证grafana用户权限是否更新。")])])])}),[],!1,null,null,null);s.default=t.exports}}]);