(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{429:function(a,s,e){"use strict";e.r(s);var n=e(12),t=Object(n.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"背景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[a._v("#")]),a._v(" 背景")]),a._v(" "),e("p",[a._v("在django的admin中，我们经常会碰到要在列表页中展示外键字段的需求，"),e("code",[a._v("list_display")]),a._v("即可用来展示对应model的字段，但直接展示model外键字段是不被允许的，怎么解决这个问题呢？继续往下看吧。")]),a._v(" "),e("h2",{attrs:{id:"示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[a._v("#")]),a._v(" 示例")]),a._v(" "),e("h3",{attrs:{id:"models-py"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#models-py"}},[a._v("#")]),a._v(" models.py")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("from django.db import models\nclass Author(models.Model):\n\tname = models.CharField(max_length=255, verbose_name='作者')\n\tage = models.IntegerField(verbose_name='年龄')\n\nclass Book(models.Model):\n\tauthor = models.ForeignKey('Author', verbose_name='作者', on_delete=models.CASCADE)\n\tname = models.CharField(max_length=255, verbose_name='书名')\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("h3",{attrs:{id:"admin-py"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#admin-py"}},[a._v("#")]),a._v(" admin.py")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("from django.contrib import admin\nfrom .models import Book\n\n# 错误的示范\n@admin.register(Book)\nclass BookAdmin(admin.ModelAdmin):\n\tlist_display = ('name', 'author__name', 'author__age')\n\n# 正确的示范\n@admin.register(Book)\nclass BookAdmin(admin.ModelAdmin):\n\tlist_display = ('name', 'display_author_name', 'display_author_age')\n\n\tdef display_author_name(self, obj):\n\t\treturn obj.author.name\n\tdisplay_author_name.short_description = '作者'\n\tdisplay_author_name.admin_order_field = 'author__name'\n\n\tdef display_author_age(self, obj):\n\t\treturn obj.author.age\n\tdisplay_author_age.short_description = '年龄'\n\tdisplay_author_age.admin_order_field = 'author__age'\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br")])]),e("h2",{attrs:{id:"总结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),e("p",[a._v("代码中"),e("code",[a._v("display_<field>.short_description")]),a._v("用于指定列标题，"),e("code",[a._v("display_<field>.admin_order_field")]),a._v("用于指定排序字段名称（若不进行设置，该列将不能进行排序）")])])}),[],!1,null,null,null);s.default=t.exports}}]);