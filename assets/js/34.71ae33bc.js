(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{456:function(t,a,e){"use strict";e.r(a);var s=e(12),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",[t._v("介绍")]),t._v(" "),e("p",[t._v("ELK是三个开源软件的缩写，分别表示：Elasticsearch , Logstash, Kibana , 它们都是开源软件。新增了一个FileBeat，它是一个轻量级的日志收集处理工具(Agent)，Filebeat占用资源少，适合于在各个服务器上搜集日志后传输给Logstash，官方也推荐此工具。")]),t._v(" "),e("p",[t._v("Elasticsearch是个开源分布式搜索引擎，提供搜集、分析、存储数据三大功能。它的特点有：分布式，零配置，自动发现，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。")]),t._v(" "),e("p",[t._v("Logstash 主要是用来日志的搜集、分析、过滤日志的工具，支持大量的数据获取方式。一般工作方式为c/s架构，client端安装在需要收集日志的主机上，server端负责将收到的各节点日志进行过滤、修改等操作在一并发往elasticsearch上去。")]),t._v(" "),e("p",[t._v("Kibana 也是一个开源和免费的工具，Kibana可以为 Logstash 和 ElasticSearch 提供的日志分析友好的 Web 界面，可以帮助汇总、分析和搜索重要数据日志。")]),t._v(" "),e("p",[t._v("Filebeat隶属于Beats。目前Beats包含四种工具：")]),t._v(" "),e("p",[t._v("Packetbeat（搜集网络流量数据）\nTopbeat（搜集系统、进程和文件系统级别的 CPU 和内存使用情况等数据）\nFilebeat（搜集文件数据）\nWinlogbeat（搜集 Windows 事件日志数据）")]),t._v(" "),e("h1",[t._v("配置要求")]),t._v(" "),e("p",[t._v("系统： Ubuntu 16.04")]),t._v(" "),e("p",[t._v("硬件： 4G以上内存")]),t._v(" "),e("p",[t._v("软件： JAVA版本1.8以上，NODEJS v8.3.0（用于安装head）")]),t._v(" "),e("p",[t._v("软件列表\n版本(v5.5.1)")]),t._v(" "),e("ul",[e("li",[t._v("Elasticsearch")]),t._v(" "),e("li",[t._v("Kibana")]),t._v(" "),e("li",[t._v("Logstash")]),t._v(" "),e("li",[t._v("filebeats")])]),t._v(" "),e("h1",[t._v("安装步骤")]),t._v(" "),e("h2",[t._v("安装JAVA 1.8")]),t._v(" "),e("h2",[t._v("安装NODEJS 8.3.0")]),t._v(" "),e("h2",[t._v("安装Elasticsearch")]),t._v(" "),e("pre",[e("code",[t._v("sudo mkdir /opt/elk\nsudo mv elasticsearch-5.5.1.tar.gz /opt/elk\nsudo tar -xvf elasticsearch-5.5.1.tar.gz\nsudo cp elasticsearch-5.5.1/config/elasticsearch.yml elasticsearch-5.5.1/config/elasticsearch.yml.bk\nsudo vi elasticsearch-5.5.1/config/elasticsearch.yml\n"),e("h1",{attrs:{id:"elasticsearch-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-yml"}},[t._v("#")]),t._v(" elasticsearch.yml")]),t._v("\n"),e("p",[t._v('cluster.name: my-application\nnode.name: node-1\npath.data: /data/elk/es/data\npath.logs: /data/elk/es/data\nnetwork.host: 192.168.0.1\nhttp.port: 9200\nhttp.cors.enabled: true\nhttp.cors.allow-origin: "*"')]),t._v("\n"),e("h1",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v("\n"),e("p",[t._v("./opt/elk/elasticsearch-5.5.1/bin/elasticsearch")]),t._v("\n"),e("h1",{attrs:{id:"测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[t._v("#")]),t._v(" 测试")]),t._v("\n"),e("p",[t._v("http://192.168.0.1:9200")])])]),t._v(" "),e("h2",[t._v("安装elasticsearch-head插件")]),t._v(" "),e("pre",[e("code",[t._v("cd /opt/elk\nsudo git clone https://github.com/mobz/elasticsearch-head.git\ncd elasticsearch-head\ncnpm install\ncnpm install -g grunt"),e("p"),t._v("\n"),e("h1",{attrs:{id:"启动-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-2"}},[t._v("#")]),t._v(" 启动")]),t._v("\n"),e("p",[t._v("grunt server")]),t._v("\n"),e("h1",{attrs:{id:"测试-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试-2"}},[t._v("#")]),t._v(" 测试")]),t._v("\n"),e("p",[t._v("http://192.168.0.1:9100")])])]),t._v(" "),e("h2",[t._v("安装kibana")]),t._v(" "),e("pre",[e("code",[t._v("sudo cp kibana-5.5.1-linux-x86_64.tar.gz /opt/elk\nsudo tar -xvf /opt/elk/kibana-5.5.1-linux-x86_64.tar.gz\nsudo cp /opt/elk/kibana-5.5.1-linux-x86_64/config/kibana.yml /opt/elk/kibana-5.5.1-linux-x86_64/config/kibana.yml.bk\nsudo vi /opt/elk/kibana-5.5.1-linux-x86_64/config/kibana.yml"),e("p"),t._v("\n"),e("h1",{attrs:{id:"kibana-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kibana-yml"}},[t._v("#")]),t._v(" kibana.yml")]),t._v("\n"),e("p",[t._v('server.port: 5601\nserver.host: "192.168.0.1"\nelasticsearch.url: "http://192.168.0.1:9200"')]),t._v("\n"),e("h1",{attrs:{id:"启动-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-3"}},[t._v("#")]),t._v(" 启动")]),t._v("\n"),e("p",[t._v("./opt/elk/kibana-5.5.1-linux-x86_64/bin/kibana serve")]),t._v("\n"),e("h1",{attrs:{id:"测试-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试-3"}},[t._v("#")]),t._v(" 测试")]),t._v("\n"),e("p",[t._v("http://192.168.0.1:5601")])])]),t._v(" "),e("h2",[t._v("安装logstash")]),t._v(" "),e("pre",[e("code",[t._v("sudo cp logstash-5.5.1.tar.gz /opt/elk\nsudo tar -xvf /opt/elk/logstash-5.5.1.tar.gz\nsudo mkdir /opt/elk/logstash-5.5.1/conf.d\nsudo vi /opt/logstash-5.5.1/conf.d/test.yml"),e("p"),t._v("\n"),e("h1",{attrs:{id:"test-yml"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#test-yml"}},[t._v("#")]),t._v(" test.yml")]),t._v("\n"),e("p",[t._v('input {\nbeats {\nport => "5044"\n}\n}')]),t._v("\n"),e("p",[t._v('filter {\ngrok {\nmatch => {\n"message" => "^(?m)%{GREEDYDATA:logdate} %{DATA:module} Thread-%{INT:thread_num} %{WORD:function} %{DATA:position} %{WORD:log_level} %{GREEDYDATA:log_message}$"\n}\n}\ndate {\nmatch => ["logdate", "yyyy-MM-dd HH:mm:ss"]\ntarget => "@timestamp"\nadd_tag => ["t_match"]\n}\n}')]),t._v("\n"),e("p",[t._v("output {")]),t._v("\n"),e("p",[t._v('elasticsearch {\nhosts => "192.168.0.1:9200"\nindex => "logstash-%{+YYYY.MM.dd}"\n}\nstdout {\ncodec => rubydebug\n}\n}')]),t._v("\n"),e("h1",{attrs:{id:"启动-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-4"}},[t._v("#")]),t._v(" 启动")]),t._v("\n"),e("p",[t._v("./opt/elk/logstash-5.5.1/bin/logstash -c /opt/elk/logstash-5.5.1/bin/logstash/test.yml")])])]),t._v(" "),e("h2",[t._v("安装filebeats")]),t._v(" "),e("pre",[e("code",[t._v("sudo cp filebeat-5.5.1-linux-x86_64.tar.gz /opt/elk\nsudo tar -xvf /opt/elk/filebeat-5.5.1-linux-x86_64.tar.gz\nsudo vi /opt/elk/filebeat-5.5.1-linux-x86_64/test.yml"),e("p"),t._v("\n"),e("h1",{attrs:{id:"test-yml-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#test-yml-2"}},[t._v("#")]),t._v(" test.yml")]),t._v("\n"),e("h2",{attrs:{id:"filebeat-prospectors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#filebeat-prospectors"}},[t._v("#")]),t._v(" filebeat:\nprospectors:")]),t._v("\n"),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("  paths:\n    - /data/logs/test.log\n  input_type: log\n  document_type: TEST\n\n  multiline.pattern: &quot;^2017&quot;\n  multiline.negate: true\n  multiline.match: after\n")])])]),e("p",[t._v('output:\nlogstash:\nhosts: ["192.168.0.1:5044"]')]),t._v(" "),e("h1",{attrs:{id:"启动-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-5"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),e("p",[t._v("./opt/elk/filebeat-5.5.1-linux-x86_64/filebeats -e -c /opt/elk/filebeat-5.5.1-linux-x86_64/test.yml")])])]),e("p")])}),[],!1,null,null,null);a.default=n.exports}}]);