(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{437:function(s,a,e){"use strict";e.r(a);var t=e(12),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"系统信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#系统信息"}},[s._v("#")]),s._v(" 系统信息")]),s._v(" "),e("ul",[e("li",[s._v("操作系统：centos 7.7")]),s._v(" "),e("li",[s._v("架构：x86_64")]),s._v(" "),e("li",[s._v("数据库：mysql 5.7")]),s._v(" "),e("li",[s._v("CM版本："),e("code",[s._v("v6.3.1")])]),s._v(" "),e("li",[s._v("CDH版本："),e("code",[s._v("v6.3.2")])])]),s._v(" "),e("h2",{attrs:{id:"cm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cm"}},[s._v("#")]),s._v(" CM")]),s._v(" "),e("blockquote",[e("p",[s._v("下载地址：https://archive.cloudera.com/cm6/6.3.1/redhat7/yum/RPMS/x86_64/")])]),s._v(" "),e("ul",[e("li",[s._v("cloudera-manager-agent-6.3.1-1466458.el7.x86_64.rpm")]),s._v(" "),e("li",[s._v("cloudera-manager-daemons-6.3.1-1466458.el7.x86_64.rpm")]),s._v(" "),e("li",[s._v("cloudera-manager-server-6.3.1-1466458.el7.x86_64.rpm")]),s._v(" "),e("li",[s._v("oracle-j2sdk1.8-1.8.0+update181-1.x86_64.rpm")])]),s._v(" "),e("h2",{attrs:{id:"cdh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cdh"}},[s._v("#")]),s._v(" CDH")]),s._v(" "),e("blockquote",[e("p",[s._v("下载地址：https://archive.cloudera.com/cdh6/6.3.2/parcels/")])]),s._v(" "),e("ul",[e("li",[s._v("CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel")]),s._v(" "),e("li",[s._v("CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel.sha1")])]),s._v(" "),e("h2",{attrs:{id:"mysql-connector"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-connector"}},[s._v("#")]),s._v(" mysql-connector")]),s._v(" "),e("blockquote",[e("p",[s._v("下载地址：https://cdn.mysql.com/archives/mysql-connector-java-5.1/mysql-connector-java-5.1.46.tar.gz")])]),s._v(" "),e("ul",[e("li",[s._v("mysql-connector-java-5.1.46.tar.gz")])]),s._v(" "),e("h1",{attrs:{id:"设置时区"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置时区"}},[s._v("#")]),s._v(" 设置时区")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo timedatectl set-timezone Asia/Shanghai\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"节点说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#节点说明"}},[s._v("#")]),s._v(" 节点说明")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("192.168.1.81  主节点 CM server & Agent & mysql\n192.168.1.82  从节点 CM Agent\n192.168.1.83  从节点 CM Agent\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h1",{attrs:{id:"主机hosts配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主机hosts配置"}},[s._v("#")]),s._v(" 主机hosts配置")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# sudo vi /etc/hosts\n192.168.1.81  cdh-01\n192.168.1.82  cdh-02\n192.168.1.83  cdh-03\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h1",{attrs:{id:"安装jdk-1-8-0"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装jdk-1-8-0"}},[s._v("#")]),s._v(" 安装jdk 1.8.0")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo rpm -ivh oracle-j2sdk1.8-1.8.0+update181-1.x86_64.rpm\n\n\nexport JAVA_HOME=/usr/java/jdk1.8.0_181-cloudera\nexport PATH=$JAVA_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h1",{attrs:{id:"部署mysql-connector"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署mysql-connector"}},[s._v("#")]),s._v(" 部署mysql-connector")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("tar -xvf mysql-connector-java-5.1.46.tar.gz\nsudo mkdir /usr/share/java\nsudo cp mysql-connector-java-5.1.46/mysql-connector-java-5.1.46.jar /usr/share/java/mysql-connector-java.jar\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h1",{attrs:{id:"关闭防火墙"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭防火墙"}},[s._v("#")]),s._v(" 关闭防火墙")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo systemctl stop firewalld\nsudo systemctl disable firewalld\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h1",{attrs:{id:"关闭selinux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭selinux"}},[s._v("#")]),s._v(" 关闭selinux")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# sudo vi /etc/sysconfig/selinux\nSELINUX=disabled\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h1",{attrs:{id:""}},[e("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("echo 10 > /proc/sys/vm/swappiness\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"禁用透明大页面压缩"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#禁用透明大页面压缩"}},[s._v("#")]),s._v(" 禁用透明大页面压缩")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# vi /etc/rc.local\n\necho never > /sys/kernel/mm/transparent_hugepage/defrag\necho never > /sys/kernel/mm/transparent_hugepage/enabled\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h1",{attrs:{id:"设置免密登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置免密登录"}},[s._v("#")]),s._v(" 设置免密登录")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 在cdh-01上\nssh-keygen\nssh-copy-id cdh-02\nssh-copy-id cdh-03\n\n# 在cdh-02上\nssh-keygen\nssh-copy-id cdh-01\nssh-copy-id cdh-03\n\n# 在cdh-03上\nssh-keygen\nssh-copy-id cdh-01\nssh-copy-id cdh-02\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h1",{attrs:{id:"配置ntp时间同步"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置ntp时间同步"}},[s._v("#")]),s._v(" 配置ntp时间同步")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo vi /etc/ntp.conf\n\n#注释掉所有server *.*.*的指向，新添加一条可连接的ntp服务器  我使用的是阿里云的NTP服务器\nserver ntp1.aliyun.com iburst\n#在其他节点上把ntp指向master服务器地址即可\nserver 192.168.1.81 iburst\n#安装完成后设置ntp开机启动并启动ntp\nsudo systemctl enable ntpd\nsudo systemctl start ntpd\n#查看状态\nsudo systemctl status ntpd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h1",{attrs:{id:"安装cm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装cm"}},[s._v("#")]),s._v(" 安装CM")]),s._v(" "),e("h2",{attrs:{id:"获取cm-通过yum"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取cm-通过yum"}},[s._v("#")]),s._v(" 获取CM(通过yum)")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo wget https://archive.cloudera.com/cm6/6.3.1/redhat7/yum/cloudera-manager.repo -P /etc/yum.repos.d/\nsudo rpm --import https://archive.cloudera.com/cm6/6.3.1/redhat7/yum/RPM-GPG-KEY-cloudera\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"安装cm-server-or-agent"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装cm-server-or-agent"}},[s._v("#")]),s._v(" 安装CM server or agent")]),s._v(" "),e("p",[s._v("建议离线安装，国内下载比较慢，事先通过迅雷下载好安装包。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 将安装包上传到目标服务器，在安装包目录执行安装即可\n\n# 主节点通过 yum 安装\nsudo yum install -y cloudera-manager-daemons-6.3.1-1466458.el7.x86_64.rpm\nsudo yum install -y cloudera-manager-agent-6.3.1-1466458.el7.x86_64.rpm\nsudo yum install -y cloudera-manager-server-6.3.1-1466458.el7.x86_64.rpm\n\n# 从节点通过 yum 安装\nsudo yum install -y cloudera-manager-daemons-6.3.1-1466458.el7.x86_64.rpm\nsudo yum install -y cloudera-manager-agent-6.3.1-1466458.el7.x86_64.rpm\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h1",{attrs:{id:"上传cdh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#上传cdh"}},[s._v("#")]),s._v(" 上传CDH")]),s._v(" "),e("p",[s._v("执行完CM安装之后，主节点上会生成"),e("code",[s._v("/opt/cloudera/parcel-repo")]),s._v("目录，我们需要把下载好的"),e("code",[s._v("parcel")]),s._v("包及hash验证文件上传")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel\n# CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel.sha1\n# 将上面两个文件上传到`/opt/cloudera/parcel-repo`目录\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"修改hash文件名称-重要-否则会重新通过网络下载"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改hash文件名称-重要-否则会重新通过网络下载"}},[s._v("#")]),s._v(" 修改hash文件名称（重要，否则会重新通过网络下载）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cp CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel.sha1 CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel.sha\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"然后修改目录权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#然后修改目录权限"}},[s._v("#")]),s._v(" 然后修改目录权限")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("chown -R cloudera-scm:cloudera-scm /opt/cloudera/parcel-repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"创建数据库及数据表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库及数据表"}},[s._v("#")]),s._v(" 创建数据库及数据表")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE DATABASE scm DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON scm.* TO 'scm'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE amon DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON amon.* TO 'amon'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE rman DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON rman.* TO 'rman'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE hue DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON hue.* TO 'hue'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE metastore DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON metastore.* TO 'hive'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE sentry DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON sentry.* TO 'sentry'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE nav DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON nav.* TO 'nav'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE navms DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON navms.* TO 'navms'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE oozie DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON oozie.* TO 'oozie'@'%' IDENTIFIED BY 'cdh123';\nCREATE DATABASE hive DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\nGRANT ALL ON hive.* TO 'hive'@'%' IDENTIFIED BY 'cdh123';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h1",{attrs:{id:"服务初始化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务初始化"}},[s._v("#")]),s._v(" 服务初始化")]),s._v(" "),e("h1",{attrs:{id:"指定cm数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#指定cm数据库"}},[s._v("#")]),s._v(" 指定cm数据库")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo /opt/cloudera/cm/schema/scm_prepare_database.sh -h <mysql-server> mysql scm scm\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"启动服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动服务"}},[s._v("#")]),s._v(" 启动服务")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 主节点执行\nsudo systemctl start cloudera-scm-server\nsudo systemctl enable cloudera-scm-server\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"访问服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问服务"}},[s._v("#")]),s._v(" 访问服务")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("http://<主节点IP>:7180/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"初始化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化"}},[s._v("#")]),s._v(" 初始化")]),s._v(" "),e("h2",{attrs:{id:"欢迎界面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#欢迎界面"}},[s._v("#")]),s._v(" 欢迎界面")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/i7cRSH.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"设置集群名称"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置集群名称"}},[s._v("#")]),s._v(" 设置集群名称")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/PSsw9r.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"将主机加入集群-通过hosts文件进行搜索"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将主机加入集群-通过hosts文件进行搜索"}},[s._v("#")]),s._v(" 将主机加入集群（通过hosts文件进行搜索）")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/WyJBXz.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"选择存储库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选择存储库"}},[s._v("#")]),s._v(" 选择存储库")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/8eb5BO.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"jdk安装选项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jdk安装选项"}},[s._v("#")]),s._v(" JDK安装选项")]),s._v(" "),e("p",[s._v("这里需要注意的是，由于我们之前已经手动安装了jdk，所以这里不再勾选，否则软件会自动重新联网安装jdk")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/iimce8.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"提供ssh登录凭证-建议使用root用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提供ssh登录凭证-建议使用root用户"}},[s._v("#")]),s._v(" 提供SSH登录凭证（建议使用root用户）")]),s._v(" "),e("p",[s._v("尽量使用root用户，否则容易出现一些权限问题\n"),e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/aZ1Pqe.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"安装agents"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装agents"}},[s._v("#")]),s._v(" 安装Agents")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/sR92yW.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"安装parcels"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装parcels"}},[s._v("#")]),s._v(" 安装Parcels")]),s._v(" "),e("p",[s._v("跳转到这个页面时，需要注意的是，我们之前已经手工上传过"),e("code",[s._v("Parcels")]),s._v("软件包，所以这里应该会直接显示已下载，如果软件仍然联网下载，则需检查之前 "),e("code",[s._v("上传CDH")]),s._v(" 步骤是否正确处理了。\n"),e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/ZdOzhB.jpg",alt:""}})]),s._v(" "),e("h2",{attrs:{id:"检查集群状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#检查集群状态"}},[s._v("#")]),s._v(" 检查集群状态")]),s._v(" "),e("p",[s._v("至此基本就安装完成了，接下来就可以安装服务了。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/XN0hLl.jpg",alt:""}})]),s._v(" "),e("h1",{attrs:{id:"问题解决"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#问题解决"}},[s._v("#")]),s._v(" 问题解决")]),s._v(" "),e("p",[s._v("如果初始化过程中出现了一些错误，导致初始化过程没有正常完成，也不要慌张。直接访问管理页面首页"),e("code",[s._v("http://<主节点IP>:7180/cmf/home")]),s._v("，解决问题即可。\n"),e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/QIZGyT.jpg",alt:""}})]),s._v(" "),e("h1",{attrs:{id:"服务安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务安装"}},[s._v("#")]),s._v(" 服务安装")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/YVBud2.jpg",alt:""}})]),s._v(" "),e("h1",{attrs:{id:"faq"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[s._v("#")]),s._v(" FAQ")]),s._v(" "),e("h2",{attrs:{id:"ntpd服务开机启动失败"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ntpd服务开机启动失败"}},[s._v("#")]),s._v(" ntpd服务开机启动失败")]),s._v(" "),e("p",[s._v("与同类型服务chronyd冲突导致启动失败，解决办法是禁用chronyd。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo systemctl disable chronyd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"cdh环境hdfs权限问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cdh环境hdfs权限问题"}},[s._v("#")]),s._v(" CDH环境HDFS权限问题")]),s._v(" "),e("p",[s._v("如下，CDH默认的超级用户组为supergroup，而linux中默认是没有这个用户组的，所以在使用非"),e("code",[s._v("hdfs")]),s._v("用户进行hdfs操作时会出现权限不足的问题。")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/u4Q2Cu.png",alt:""}})]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo groupadd supergroup\nsudo usermod -a -G supergroup root\nsudo usermod -a -G supergroup centos\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"yarn异常"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#yarn异常"}},[s._v("#")]),s._v(" yarn异常")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("org.apache.tez.dag.api.SessionNotRunning: TezSession has already shutdown. Application application_1583310390862_0002 failed 2 times due to AM Container for appattempt_1583310390862_0002_000002 exited with  exitCode: -1000\nFailing this attempt.Diagnostics: [2020-03-04 16:30:26.881]org.apache.hadoop.yarn.exceptions.YarnException: Download and unpack failed\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("解决方案")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/blog/8KH21f.png",alt:""}})])])}),[],!1,null,null,null);a.default=r.exports}}]);