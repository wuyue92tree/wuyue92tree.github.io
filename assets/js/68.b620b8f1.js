(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{420:function(s,n,e){"use strict";e.r(n);var a=e(12),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"硬件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#硬件"}},[s._v("#")]),s._v(" 硬件")]),s._v(" "),e("ul",[e("li",[s._v("NodeMCU ESP8266")]),s._v(" "),e("li",[s._v("L298N驱动板")])]),s._v(" "),e("h1",{attrs:{id:"接线图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#接线图"}},[s._v("#")]),s._v(" 接线图")]),s._v(" "),e("p",[s._v("这里以单电机为例，双电机同理")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("电机A")]),s._v(" "),e("p",[s._v("ENA – 为电机A启用PWM信号")]),s._v(" "),e("p",[s._v("IN1 – 启用电机A")]),s._v(" "),e("p",[s._v("IN2 – 启用电机A")])]),s._v(" "),e("li",[e("p",[s._v("电机B")]),s._v(" "),e("p",[s._v("ENB – 为电机B启用PWM信号")]),s._v(" "),e("p",[s._v("IN3：启用电机B")]),s._v(" "),e("p",[s._v("IN4：启用电机B")])])]),s._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wuyue92tree/oss/raw/master/uPic/eniB5L.jpg",alt:"eniB5L"}})]),s._v(" "),e("h1",{attrs:{id:"代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码"}},[s._v("#")]),s._v(" 代码")]),s._v(" "),e("p",[s._v("L298n类将左右两个电机分为A和B，通过"),e("code",[s._v("*_A")]),s._v("方法分别对两个电机进行控制")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# l298n.py\nfrom machine import Pin, PWM\n\n\nclass L298n:\n    def __init__(self, int1=None, int2=None, int3=None, int4=None, ena=None, enb=None, frequency=1000):\n        self.int1 = Pin(int1, Pin.OUT) if int1 is not None else None\n        self.int2 = Pin(int2, Pin.OUT) if int2 is not None else None\n        self.int3 = Pin(int3, Pin.OUT) if int3 is not None else None\n        self.int4 = Pin(int4, Pin.OUT) if int4 is not None else None\n        self.ena = PWM(Pin(ena), frequency) if ena is not None else None\n        self.enb = PWM(Pin(enb), frequency) if enb is not None else None\n\n    def start_A(self, reverse=False, speed=1023):\n        if self.int1 and self.int2:\n            if reverse is True:\n                self.int1.on()\n                self.int2.off()\n            else:\n                self.int1.off()\n                self.int2.on()\n        else:\n            raise 'L298n A start failed.'\n        if self.ena:\n            self.setup_speed_A(speed)\n\n    def stop_A(self):\n        self.int1.off()\n        self.int2.off()\n\n\n    def start_B(self, reverse=False, speed=1023):\n        if self.int3 and self.int4:\n            if reverse is True:\n                self.int3.on()\n                self.int4.off()\n            else:\n                self.int3.off()\n                self.int4.on()\n        else:\n            raise 'L298n B start failed.'\n        \n        if self.enb:\n            self.setup_speed_B(speed)\n\n    def stop_B(self):\n        self.int3.off()\n        self.int4.off()\n\n    def setup_speed_A(self, speed=1023):\n        if not self.ena:\n            raise 'L298n ena not found.'\n        self.ena.duty(speed)\n\n    def setup_speed_B(self, speed=1023):\n        if not self.enb:\n            raise 'L298n enb not found.'\n        self.enb.duty(speed)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br")])]),e("h1",{attrs:{id:"调用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#调用"}},[s._v("#")]),s._v(" 调用")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("from l298n import L298n\n\n# 参数为esp8266引脚和l298n驱动板对应\n\nGPIO0 - INT1\nGPIO2 - INT2\nGPIO4 - ENA\n\nl = L298n(int1=0, int2=2, ena=4)\n\n# 默认以全速运行\n# reverse控制电机反转\nl.start_A()\n\n# speed的取值范围为0-1023\nl.setup_speed_A(speed=600)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);