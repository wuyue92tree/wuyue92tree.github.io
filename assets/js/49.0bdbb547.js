(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{488:function(e,t,a){"use strict";a.r(t);var n=a(12),o=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",[e._v("介绍")]),e._v(" "),a("p",[e._v("Puppeteer 是一个 Node 库，它提供了一个高级 API 来通过 DevTools 协议控制 Chromium 或 Chrome。Puppeteer 默认以 headless 模式运行，但是可以通过修改配置文件运行“有头”模式。")]),e._v(" "),a("p",[a("a",{attrs:{href:"http://www.puppeteerjs.com/"}},[e._v("http://www.puppeteerjs.com/")])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://try-puppeteer.appspot.com/"}},[e._v("https://try-puppeteer.appspot.com/")])]),e._v(" "),a("h1",[e._v("安装")]),e._v(" "),a("pre",[a("code",[e._v("npm install puppeteer")])]),e._v(" "),a("h1",[e._v("示例")]),e._v(" "),a("pre",[a("code",[e._v("const puppeteer = require('puppeteer');\n"),a("p",[e._v("(async () => {\nconst browser = await puppeteer.launch({\nheadless: false,\n// devtools: true\n})\nconst cookies = []\nconst page = await browser.newPage()\nawait page.setViewport({\nwidth: 1280,\nheight: 960\n})\nawait page.setUserAgent('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36')\nawait page.setCookie(...cookies)\nawait page.goto('https://rd5.zhaopin.com/custom/searchv2/result')\nawait page.evaluate(async () => {\nObject.defineProperty(navigator, 'webdriver', { get: () => false });\nwindow.localStorage.setItem('intro_search_version', '1');\n})\nawait page.reload();\nawait page.waitFor(2000);\nlet listFrame = await page.frames()[0]\nconst resumeList = await listFrame.$x(\"//a[@class='is-text-normal']\");\nconsole.log('match Resume ' + resumeList.length);\nfor (let i in resumeList) {\nresumeList[i].click();\nawait listFrame.waitFor(1000);\n}\nawait page.waitFor(2000);\nawait page.screenshot({ path: './test.png' })\nawait page.close()\nbrowser.close()\n})()")])])]),e._v(" "),a("h1",[e._v("方法说明")]),e._v(" "),a("h2",[e._v("设置页面大小")]),e._v(" "),a("pre",[a("code",[e._v("await page.setViewport({\nwidth: 1280,\nheight: 960\n})")])]),e._v(" "),a("h2",[e._v("设置UA")]),e._v(" "),a("pre",[a("code",[e._v("await page.setUserAgent('Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36')")])]),e._v(" "),a("h2",[e._v("设置cookie")]),e._v(" "),a("pre",[a("code",[e._v("const cookies = [{'name': '', 'value': ''}]\nawait page.setCookie(...cookies)")])]),e._v(" "),a("h2",[e._v("刷新页面")]),e._v(" "),a("pre",[a("code",[e._v("await page.reload();")])]),e._v(" "),a("h2",[e._v("page页操作")]),e._v(" "),a("pre",[a("code",[e._v("const page = await brower.newPage()\n// 监听browser.on('targetcreated')事件\nconst newPagePromise = new Promise(resolve => browser.on('targetcreated', target => resolve(target.page())))\nawait page.click(\"#test\")\nconst newPage = await newPagePromise\nawait newPage.waitFor(3000)\nlet page2Content = await newPage.content()\nconsole.log(page2Content)\nawait newPage.close()\nawait page.close()")])]),e._v(" "),a("h2",[e._v("设置代理")]),e._v(" "),a("pre",[a("code",[e._v("const browser = await puppeteer.launch({\nheadless: false,\n// devtools: true,\n// 127.0.0.1:1080\nargs: ['--proxy-server=' + this.proxy]\n})")])]),e._v(" "),a("h2",[e._v("Disable图片")]),e._v(" "),a("pre",[a("code",[e._v("async function disableImage (page) {\nawait page.setRequestInterception(true)\npage.on('request', request => {\nif (request.resourceType() === 'image') {\nrequest.abort()\n} else {\nrequest.continue()\n}\n})\n}")])]),a("p")])}),[],!1,null,null,null);t.default=o.exports}}]);